# å‘å¸ƒæŒ‡å—

æœ¬æ–‡æ¡£è¯´æ˜å¦‚ä½•ä½¿ç”¨ GitHub Actions è‡ªåŠ¨æ„å»ºå’Œå‘å¸ƒç¯å¢ƒå˜é‡ç®¡ç†å™¨ã€‚

## ğŸš€ è‡ªåŠ¨å‘å¸ƒæµç¨‹

### è§¦å‘æ¡ä»¶
- æ¨é€åˆ° `main` åˆ†æ”¯æ—¶è‡ªåŠ¨è§¦å‘æ„å»ºå’Œå‘å¸ƒæµç¨‹
- åªæœ‰å½“ç‰ˆæœ¬å·å‘ç”Ÿå˜åŒ–æ—¶æ‰ä¼šåˆ›å»ºæ–°çš„ Release

### å‘å¸ƒæ­¥éª¤

1. **æµ‹è¯•é˜¶æ®µ**
   - åœ¨å¤šä¸ªå¹³å°ï¼ˆWindowsã€macOSã€Linuxï¼‰ä¸Šè¿è¡Œæµ‹è¯•
   - å®‰è£…ä¾èµ–å¹¶æ„å»ºå‰ç«¯
   - éªŒè¯ä»£ç è´¨é‡

2. **æ„å»ºé˜¶æ®µ**
   - åŒæ­¥ `package.json` å’Œ `tauri.conf.json` çš„ç‰ˆæœ¬å·
   - æ„å»º Tauri åº”ç”¨ç¨‹åº
   - ç”Ÿæˆå®‰è£…åŒ…ï¼ˆ.msiã€.exe ç­‰ï¼‰

3. **å‘å¸ƒé˜¶æ®µ**
   - æ£€æŸ¥ç‰ˆæœ¬æ ‡ç­¾æ˜¯å¦å·²å­˜åœ¨
   - åˆ›å»º GitHub Release
   - ä¸Šä¼ æ„å»ºäº§ç‰©

## ğŸ“¦ æ‰‹åŠ¨å‘å¸ƒ

### æ–¹æ³•ä¸€ï¼šä½¿ç”¨å‘å¸ƒè„šæœ¬ï¼ˆæ¨èï¼‰

```bash
# å‘å¸ƒè¡¥ä¸ç‰ˆæœ¬ (1.0.0 -> 1.0.1)
npm run release:patch

# å‘å¸ƒæ¬¡è¦ç‰ˆæœ¬ (1.0.0 -> 1.1.0)
npm run release:minor

# å‘å¸ƒä¸»è¦ç‰ˆæœ¬ (1.0.0 -> 2.0.0)
npm run release:major
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š
- æ›´æ–°ç‰ˆæœ¬å·
- åŒæ­¥ Tauri é…ç½®
- æä¾› git å‘½ä»¤æç¤º

### æ–¹æ³•äºŒï¼šæ‰‹åŠ¨æ“ä½œ

1. **æ›´æ–°ç‰ˆæœ¬å·**
   ```bash
   npm version patch  # æˆ– minor, major
   ```

2. **åŒæ­¥ç‰ˆæœ¬åˆ° Tauri**
   ```bash
   npm run sync-version
   ```

3. **æäº¤å¹¶æ¨é€**
   ```bash
   git add .
   git commit -m "chore: release v1.0.1"
   git push origin main
   ```

## ğŸ”§ é…ç½®è¯´æ˜

### GitHub Actions å·¥ä½œæµ

#### `.github/workflows/release.yml`
- **ç”¨é€”**ï¼šä¸»å‘å¸ƒå·¥ä½œæµ
- **è§¦å‘**ï¼šæ¨é€åˆ° main åˆ†æ”¯
- **åŠŸèƒ½**ï¼šæ„å»ºåº”ç”¨å¹¶åˆ›å»º Release

#### `.github/workflows/build.yml`
- **ç”¨é€”**ï¼šæ„å»ºå’Œæµ‹è¯•å·¥ä½œæµ
- **è§¦å‘**ï¼šæ¨é€åˆ°ä»»ä½•åˆ†æ”¯æˆ– PR
- **åŠŸèƒ½**ï¼šå¤šå¹³å°æ„å»ºæµ‹è¯•

### ç‰ˆæœ¬ç®¡ç†

#### `scripts/sync-version.js`
- åŒæ­¥ `package.json` å’Œ `src-tauri/tauri.conf.json` çš„ç‰ˆæœ¬å·
- ç¡®ä¿å‰åç«¯ç‰ˆæœ¬ä¸€è‡´

#### `scripts/release.js`
- è‡ªåŠ¨åŒ–å‘å¸ƒæµç¨‹
- æ”¯æŒè¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶

## ğŸ“‹ å‘å¸ƒæ£€æŸ¥æ¸…å•

å‘å¸ƒå‰è¯·ç¡®è®¤ï¼š

- [ ] ä»£ç å·²åˆå¹¶åˆ° `main` åˆ†æ”¯
- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡
- [ ] ç‰ˆæœ¬å·å·²æ­£ç¡®æ›´æ–°
- [ ] CHANGELOG.md å·²æ›´æ–°ï¼ˆå¦‚æœæœ‰ï¼‰
- [ ] æ„å»ºé…ç½®æ­£ç¡®
- [ ] å›¾æ ‡æ–‡ä»¶å­˜åœ¨ï¼ˆ`src-tauri/icons/icon.ico`ï¼‰

## ğŸ› ï¸ æ„å»ºäº§ç‰©

### Windows
- `.msi` å®‰è£…åŒ…ï¼ˆæ¨èï¼‰
- `.exe` å®‰è£…ç¨‹åº

### macOS
- `.dmg` ç£ç›˜æ˜ åƒ
- `.app` åº”ç”¨ç¨‹åºåŒ…

### Linux
- `.deb` Debian åŒ…
- `.rpm` Red Hat åŒ…
- `.AppImage` ä¾¿æºåº”ç”¨

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **æ„å»ºå¤±è´¥**
   - æ£€æŸ¥ Rust å’Œ Node.js ç‰ˆæœ¬
   - ç¡®è®¤ä¾èµ–å®‰è£…æ­£ç¡®
   - æŸ¥çœ‹ GitHub Actions æ—¥å¿—

2. **ç‰ˆæœ¬å†²çª**
   - è¿è¡Œ `npm run sync-version` åŒæ­¥ç‰ˆæœ¬
   - æ£€æŸ¥ `package.json` å’Œ `tauri.conf.json`

3. **Release æœªåˆ›å»º**
   - ç¡®è®¤ç‰ˆæœ¬å·å·²æ›´æ”¹
   - æ£€æŸ¥ GitHub token æƒé™
   - æŸ¥çœ‹å·¥ä½œæµæ—¥å¿—

### è°ƒè¯•å‘½ä»¤

```bash
# æ£€æŸ¥ç‰ˆæœ¬åŒæ­¥
npm run sync-version

# æœ¬åœ°æ„å»ºæµ‹è¯•
npm run tauri:build

# æŸ¥çœ‹å½“å‰ç‰ˆæœ¬
node -e "console.log(require('./package.json').version)"
```

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [Tauri æ„å»ºæŒ‡å—](https://tauri.app/v1/guides/building/)
- [GitHub Actions æ–‡æ¡£](https://docs.github.com/en/actions)
- [è¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶](https://semver.org/lang/zh-CN/)

## ğŸ¤ è´¡çŒ®

å¦‚æœæ‚¨å‘ç°å‘å¸ƒæµç¨‹ä¸­çš„é—®é¢˜æˆ–æœ‰æ”¹è¿›å»ºè®®ï¼Œè¯·ï¼š

1. åˆ›å»º Issue æè¿°é—®é¢˜
2. æäº¤ Pull Request ä¿®å¤é—®é¢˜
3. æ›´æ–°ç›¸å…³æ–‡æ¡£

---

**æ³¨æ„**ï¼šé¦–æ¬¡è®¾ç½®æ—¶ï¼Œè¯·ç¡®ä¿ GitHub ä»“åº“å·²å¯ç”¨ Actions å¹¶å…·æœ‰é€‚å½“çš„æƒé™ã€‚